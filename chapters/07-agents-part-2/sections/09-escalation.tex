% ============================================================================
% 09-escalation.tex
% Q8: How Does an Agent Know When to Ask for Help?
% Part of: Chapter 07 - Agents Part II: How to Build an Agent
% ============================================================================

\section{How Does an Agent Know When to Ask for Help?}
\label{sec:agents2-escalation}

% ----------------------------------------------------------------------------
% Opening: Q8 Framing and Organizational Analogy
% ----------------------------------------------------------------------------

Sometimes the best thing to know is when you do not know something. A wise junior associates knows when to consult their supervising partner.  In turn, a deputy corporate counsel can intuit that an issue should be escalated to someone more senior within the organization.  Of course, it is a balancing act whereby it is unwise to interrupt the partner or senior lawyer with every question, but they also do not proceed confidently into territory beyond their expertise. In a sense, the most intelligent junior resources recognize authority boundaries: ``I can draft this motion, but I need partner review before filing.'' They recognize competence limits: ``I have researched for two hours and cannot find clear authority---I should ask someone with more experience.'' They recognize high-stakes situations: ``The client is asking about strategy, not just research---this needs partner involvement.''

Agentic systems require the same judgment. An agent that never escalates will eventually exceed its competence, authority, or the bounds of safe autonomous operation. An agent that escalates everything provides no value: it becomes a complicated way to route work to humans. The challenge is drawing the line.

\begin{definitionbox}[title={Escalation}]
\keyterm{Escalation} transfers control from the agent to a human when autonomous execution should stop. Unlike termination, which ends the task (success or failure), escalation pauses the task and requests human input before continuing.

This reflects professionalism, not failure. Recognizing when you need help and asking for it is exactly what we expect from junior professionals. Agents should do the same.
\end{definitionbox}

% ----------------------------------------------------------------------------
% When to Escalate: Decision Framework
% ----------------------------------------------------------------------------

\subsection{When to Escalate}
\label{sec:agents2-when-escalate}

Three categories of triggers warrant escalation: mandatory triggers, confidence-based triggers, and error detection \parencite{hitl-survey-2022,human-ai-taxonomy-2024}.

\textbf{Mandatory triggers} require human involvement regardless of the agent's confidence.
\begin{itemize}[nosep]
    \item \textbf{Budget Exhaustion:} When resource limits approach, escalate with a progress summary rather than stopping silently.
    \item \textbf{High-Stakes Actions:} Court filings, client communications, and large trades require human approval (approval gates).
    \item \textbf{Authority Boundaries:} Actions exceeding authorized thresholds require human sign-off.
    \item \textbf{Irreversibility:} Actions that cannot be undone (filing, trading) warrant pre-execution review.
\end{itemize}

\textbf{Confidence-based triggers} occur when uncertainty exceeds acceptable thresholds \parencite{ai-uncertainty-2023}.
\begin{itemize}[nosep]
    \item \textbf{Low Output Confidence:} ``I found conflicting circuit authority and cannot determine the rule.''
    \item \textbf{Conflicting Information:} Data sources disagree (e.g., 10-K vs. earnings release).
    \item \textbf{Novel Situations:} Unprecedented fact patterns or market conditions require human expertise.
    \item \textbf{Ambiguity:} The agent remains uncertain about instructions despite clarification attempts.
\end{itemize}

\textbf{Error and anomaly detection} triggers escalation when the agent cannot fix the problem.
\begin{itemize}[nosep]
    \item \textbf{Repeated Failures:} If a tool fails three times, report unavailability rather than retrying.
    \item \textbf{Data Anomalies:} Figures that do not reconcile or suspicious filing dates warrant investigation.
    \item \textbf{Constraint Violations:} If an action would violate policy (e.g., position limits), escalate for confirmation.
    \item \textbf{Impossibility:} Report when the task cannot be completed as specified.
\end{itemize}

% ----------------------------------------------------------------------------
% How to Escalate: Information Handoff
% ----------------------------------------------------------------------------

\subsection{How to Escalate}
\label{sec:agents2-how-escalate}

Effective escalation provides the human with everything needed to make a decision. A complete handoff includes five parts:
\begin{enumerate}
    \item \textbf{Situation Summary:} Brief context for the human.
    \item \textbf{Progress to Date:} What has been done and what remains.
    \item \textbf{Trigger:} Why the agent is escalating now.
    \item \textbf{Information Gathered:} Relevant findings (even if partial).
    \item \textbf{Recommendation:} A proposed path forward with reasoning.
\end{enumerate}

\paragraph{Example: Legal Research Escalation}

\begin{quote}
\textbf{Situation}: Researching statute of limitations for Section 10(b) securities fraud claim.

\textbf{Progress}: Searched Westlaw and Lexis. Found clear authority on the 2-year discovery period but conflicting authority on the trigger event.

\textbf{Trigger}: Low confidence. The Ninth and Second Circuits apply different tests for inquiry notice. I cannot determine which applies to our facts.

\textbf{Findings}: [Summary of key cases with citations]

\textbf{Options}: (a) Apply the conservative test; (b) research district court authority; (c) seek partner guidance on the fact pattern.

\textbf{Recommendation}: Option (c). The question is fact-intensive, and partner judgment is required.
\end{quote}

\paragraph{Example: Financial Escalation}

\begin{quote}
\textbf{Situation}: Executing rebalancing trades to reduce tech exposure from 35\% to 25\%.

\textbf{Progress}: Generated trade list. Compliance check passed. Ready to execute.

\textbf{Trigger}: Trade size (\$500K) exceeds single-approver threshold.

\textbf{Findings}: Trades realize \$45K in short-term gains and \$12K in losses. Net tax impact: \$8K liability.

\textbf{Options}: (a) Approve full list; (b) prioritize tax-loss positions; (c) execute in tranches.

\textbf{Recommendation}: Option (a) if reducing exposure is urgent; Option (b) if tax optimization is priority.
\end{quote}

% ----------------------------------------------------------------------------
% Human-in-the-Loop Patterns
% ----------------------------------------------------------------------------

\subsection{Human-in-the-Loop Patterns}
\label{sec:agents2-hitl}

We define five patterns for integrating human oversight, suited to different risk profiles.

\textbf{Approval Gates} separate preparation from authorization. The agent drafts; the human approves. This is essential for irreversible actions (filings, trades).

\textbf{Checkpoint Reviews} verify direction at milestones. A research agent presents authorities before drafting, preventing wasted effort.

\textbf{Confidence-Based Escalation} ties autonomy to certainty. High confidence triggers autonomous execution; low confidence triggers escalation.

\textbf{Human-as-Tool} treats human expertise like any other resource. The agent queries an expert when needed, incorporates the response, and proceeds.

\textbf{Reversibility Classification}\\[-0.2em]
matches oversight to risk. Fully reversible actions proceed autonomously. Irreversible actions require pre-approval.

\input{figures/fig-oversight-spectrum}

% ----------------------------------------------------------------------------
% Domain-Specific Escalation
% ----------------------------------------------------------------------------

\subsection{Domain-Specific Escalation Requirements}
\label{sec:agents2-escalation-domain}

Regulated industries impose specific escalation duties based on professional responsibility and compliance rules.

\paragraph{Legal Practice}
Escalation requirements arise from professional responsibility rules \parencite{aba-model-rule-1-1,aba-formal-opinion-512}:
\begin{itemize}[nosep]
\item \textbf{Competence Limits:} Escalate when matters exceed agent training (ABA Model Rule 1.1).
\item \textbf{Privilege Protection:} Escalate any action that might expose privileged information.
\item \textbf{Conflicts of Interest:} Escalate potential conflicts to counsel.
\item \textbf{Candor to Tribunal:} Escalate immediately if adverse authority requires disclosure.
\end{itemize}

\paragraph{Financial Services}
Requirements arise from regulatory obligations and fiduciary duties \parencite{finra-notice-24-09,fed-sr11-7}:
\begin{itemize}[nosep]
\item \textbf{Suitability:} Escalate investment recommendations for adviser review.
\item \textbf{Regulatory Thresholds:} Escalate when trades approach reporting limits.
\item \textbf{MNPI:} Escalate immediately if potential Material Non-Public Information is encountered.
\item \textbf{Risk Limits:} Escalate actions that would breach position limits.
\end{itemize}

% ----------------------------------------------------------------------------
% Evaluating Escalation
% ----------------------------------------------------------------------------

\subsection{Evaluating Escalation Mechanisms}
\label{sec:agents2-escalation-eval}

Assess escalation mechanisms against six criteria:

\textbf{Coverage:} Do all appropriate situations trigger escalation? Test edge cases and conflicting data.

\textbf{Calibration:} Are thresholds set correctly? Avoid escalating everything (low value) or nothing (high risk).

\textbf{Latency:} Does escalation reach the human quickly enough? Urgent matters require immediate notification.

\textbf{Routing:} Does it reach the \textit{right} person? Legal questions go to attorneys; risk breaches go to managers.

\textbf{Context Quality:} Can the human decide based on the message alone? If they must investigate from scratch, the handoff failed.

\textbf{Response Handling:} Does the agent correctly incorporate the human's guidance? Test the full cycle.

% ----------------------------------------------------------------------------
% Connection to Other Questions
% ----------------------------------------------------------------------------

\subsection{From Escalation to Delegation}
\label{sec:agents2-escalation-delegation}

Escalation moves control \textit{up} (vertical) to a supervisor. Agents can also move control \textit{sideways} (horizontal) by delegating to specialists.

\Cref{sec:agents2-delegation} examines this next question: how does an agent work with other agents? Delegation patterns enable complex workflows where coordinating agents assign tasks to specialists (research, drafting, modeling), while each retains the ability to escalate vertically when needed. Together, escalation and delegation define the full topology of human-agent collaboration.
