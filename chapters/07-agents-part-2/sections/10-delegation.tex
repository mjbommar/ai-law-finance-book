% ============================================================================
% 10-delegation.tex
% Q9: How Does an Agent Work with Other Agents?
% Part of: Chapter 07 - Agents Part II: How to Build an Agent
% ============================================================================

\section{How Does an Agent Work with Other Agents?}
\label{sec:agents2-delegation}

% ----------------------------------------------------------------------------
% Opening: Q9 Framing and Organizational Analogy
% ----------------------------------------------------------------------------

Complex matters require coordination. The M\&A partner does not do everything personally but instead coordinates specialists: corporate counsel reviews governance documents, tax specialists analyze structure, antitrust counsel assesses regulatory risk, employment lawyers review executive agreements. Each specialist has deep expertise in their domain. The partner's job is orchestration: defining what each specialist should produce, ensuring deliverables integrate coherently, and synthesizing conclusions for the client.

A portfolio manager coordinates similarly: research analysts provide company-specific analysis, traders handle execution, risk managers monitor exposure, compliance officers verify regulatory adherence. Complex trades require all these perspectives; no single person has all the expertise.

Agentic systems face the same coordination challenge. A single agent trying to do everything quickly exceeds its competence, permission boundaries, or context limits. Multi-agent architectures mirror professional teams: specialized agents with deep expertise in narrow domains, orchestrators that coordinate their work, and protocols that enable collaboration.

\begin{definitionbox}[title={Delegation}]
\keyterm{Delegation} assigns subtasks from one agent (the coordinator) to another (the specialist). Unlike escalation (agent to human), delegation is agent to agent. The coordinator defines \textit{what} needs to be done; the specialist determines \textit{how}.

Delegation enables parallelization (multiple specialists work simultaneously), specialization (each agent is optimized for its domain), and security isolation (each agent has only the permissions it needs).
\end{definitionbox}

% ----------------------------------------------------------------------------
% Why Multi-Agent?
% ----------------------------------------------------------------------------

\subsection{Why Multi-Agent Architectures?}
\label{sec:agents2-why-multi-agent}

Several factors drive multi-agent designs \parencite{wu2023autogen,guo2024multiagent}.

Specialization allows each agent to excel in a narrow domain. A securities law agent can be optimized for SEC regulations, loaded with relevant precedent, and equipped with EDGAR tools. A separate tax agent handles tax implications with different tools and knowledge. Neither needs to be expert in the other's domain.

Security isolation gives each agent minimum necessary permissions. The research agent can read legal databases but cannot file documents. The filing agent can submit to CM/ECF but cannot access client financial data. If one agent is compromised, damage is contained.

Parallel execution lets independent workstreams proceed simultaneously. The document review agent analyzes contracts while the research agent investigates legal issues. Neither waits for the other. Vendor diversity allows different agents to use different models or providers: a specialized legal model for research, a general model for drafting, a fast model for classification. Multi-agent enables best-of-breed selection.

Scale management addresses context window limits. Rather than cramming everything into one context, you can decompose across agents, each with focused context.

The tradeoffs are coordination overhead (agents must communicate), debugging complexity (failures span multiple agents), and additional security surface (more agents means more potential attack vectors).

% ----------------------------------------------------------------------------
% Agent-to-Agent Protocol (A2A)
% ----------------------------------------------------------------------------

\subsection{Agent-to-Agent Protocol (A2A)}
\label{sec:agents2-a2a}

The Agent-to-Agent Protocol (A2A) standardizes how agents collaborate, complementing MCP's tool integration \parencite{google-a2a,anthropic-mcp}. If MCP is how agents access resources, A2A is how agents delegate work to specialists.

A2A uses familiar professional concepts. Agent Cards are capability statements, like a specialist's résumé listing expertise, input requirements, and output formats. Before delegating, the coordinator reviews the Agent Card to confirm the specialist can handle the task.

Tasks are units of delegated work, like engagement letters specifying scope, constraints, and deadlines. The coordinator creates a Task; the specialist accepts and executes. Upon completion, specialists return Artifacts: draft memos, analysis reports, structured data. The coordinator integrates these work products into the final deliverable.

Communication Channels support asynchronous, long-running work. You assign research Monday; the memo arrives Friday. Channels enable status updates and clarification requests during execution.

Agent collaboration follows five phases mirroring professional delegation:

\begin{keybox}[title={A2A Task Delegation}]
The task lifecycle begins with \textbf{discovery}: finding the right specialist via Agent Card, much like finding co-counsel through a directory. Next comes \textbf{delegation}: creating a Task with goals, constraints, and deadline, analogous to drafting an engagement letter. During \textbf{execution}, the specialist works independently and may request clarification, like an associate researching a legal question. Upon \textbf{delivery}, the specialist returns Artifacts, submitting a draft memo for review. Finally, \textbf{completion} occurs when the coordinator reviews, approves, or requests revision---the partner review that ensures quality.

\vspace{0.5em}
The key insight is that A2A enables delegation without micromanagement: you define \textit{what} needs to be done; the specialist decides \textit{how}.
\end{keybox}

% ----------------------------------------------------------------------------
% Multi-Agent Patterns
% ----------------------------------------------------------------------------

\subsection{Multi-Agent Patterns}
\label{sec:agents2-orchestration}

Three patterns organize multi-agent collaboration \parencite{wang2024tdag}.

In sequential delegation, specialists work in sequence, each building on prior work: the Coordinator delegates to a Research Agent, whose output flows to an Analysis Agent, then to a Drafting Agent, before the Coordinator synthesizes the final result. This pattern is simple but slow because each specialist waits for prior completion.

Parallel delegation allows independent specialists to work simultaneously. Securities, Tax, and Employment Agents can analyze an acquisition concurrently while the Coordinator integrates their findings. This approach is faster but requires task independence.

Hierarchical delegation enables specialists to delegate to sub-specialists. A Lead Due Diligence Agent might delegate to Document Review and Legal Research agents, each of which may further delegate. This pattern handles complex matters but introduces coordination overhead and cascading failure risk.

\input{figures/fig-orchestration-patterns}

Production systems typically require both MCP and A2A working in concert. MCP handles agent-to-tool communication: each specialist agent uses MCP to access its domain-specific tools, including databases, calculators, and external systems. A2A handles agent-to-agent coordination: the orchestrator uses A2A to delegate tasks to specialists and receive artifacts.

Consider an M\&A due diligence example. The orchestrator receives the instruction to conduct due diligence on a target company acquisition and delegates via A2A to three specialists. The Document Processing Agent indexes the data room, classifies documents, and extracts key terms, using MCP to access document management systems and OCR tools. The Financial Analysis Agent analyzes financial statements, builds models, and identifies risks, using MCP to access financial databases and calculation tools. The Legal Risk Agent reviews contracts for problematic provisions and researches legal issues, using MCP to access legal research platforms and precedent databases.

Each specialist returns Artifacts via A2A. The orchestrator synthesizes these into a comprehensive due diligence report. Throughout, MCP handles tool access while A2A handles coordination. Neither protocol alone suffices.

% ----------------------------------------------------------------------------
% Multi-Agent Workflows
% ----------------------------------------------------------------------------

\subsection{Multi-Agent Workflow Examples}
\label{sec:agents2-workflows}

Consider a legal workflow for regulatory compliance assessment. A fintech company asks what regulatory approvals it needs to launch a new product. The Orchestrator receives this query and decomposes it into regulatory domains.

The Securities Agent analyzes whether the product involves securities, using MCP to search SEC guidance, no-action letters, and case law. It concludes that the product likely constitutes a security under the Howey test and that registration or an exemption is required. The Banking Agent analyzes banking law implications, searching OCC, FDIC, and state banking guidance. It determines that no bank charter is required but that state money transmitter licenses may apply.

The Consumer Protection Agent analyzes CFPB jurisdiction and state consumer laws, identifying UDAP exposure and recommending clear disclosures and complaint handling procedures. The AML Agent analyzes Bank Secrecy Act obligations and determines that FinCEN registration is required along with a KYC/AML program.

The Orchestrator synthesizes these findings into a comprehensive regulatory roadmap with prioritized action items.

A financial workflow illustrates large block trade execution. A portfolio manager requests execution of a \$50M block trade in XYZ Corp while minimizing market impact. The Orchestrator decomposes this into analysis and execution phases.

The Market Agent analyzes current liquidity, trading patterns, and optimal execution windows using MCP for market data feeds. It recommends VWAP execution over two days given average daily volume of \$200M. The Compliance Agent verifies that the trade does not breach limits or create reporting obligations, using MCP for compliance databases. It confirms the trade is within limits but notes that a 13F amendment will be required at quarter-end.

The Risk Agent assesses the impact on portfolio risk metrics using MCP for the risk engine. It finds that the trade increases sector concentration by 2\%, which remains within policy limits. The Execution Agent implements the execution strategy using MCP for order management systems and confirms that the order has been placed.

The Orchestrator monitors execution, coordinates any necessary adjustments, and reports completion to the portfolio manager.

% ----------------------------------------------------------------------------
% Multi-Agent Risks
% ----------------------------------------------------------------------------

\subsection{Multi-Agent Risks}
\label{sec:agents2-coordination-failures}

Multi-agent systems introduce failure modes and security challenges beyond single-agent problems.

Several coordination failure patterns can emerge. Deadlock occurs when agents wait for each other cyclically and neither proceeds; prevention requires clear task dependencies, timeouts, and circular-wait detection. Divergent conclusions arise when specialists reach incompatible results; the orchestrator must detect conflicts and either reconcile them or escalate to human judgment.

Cascading errors occur when incorrect output from one agent propagates through dependent agents. Prevention requires validating inputs at each handoff rather than trusting upstream agents. Coordination overhead presents a different challenge: communication consumes tokens, time, and cost, so for simple tasks, the overhead may exceed specialization benefits. Use multi-agent architectures when complexity justifies the coordination cost.

Accountability gaps emerge when something fails and it is unclear which agent is responsible. Prevention requires comprehensive logging at every delegation, clear audit trails, and defined accountability for each subtask.

Multi-agent systems also require security controls at the coordination layer \parencite{openid-ai-identity-2024}. Agent identity is fundamental: each agent must have verifiable identity, with cryptographic signatures authenticating Agent Cards and task responses to prevent impersonation attacks.

Authorization controls restrict delegation relationships. Not every agent can delegate to every specialist; access control policies define which delegation paths are valid. Information barriers enforce legal conflicts and financial Chinese walls across agent boundaries. An agent working on Company A's acquisition cannot delegate to agents with access to Company A's confidential information from other engagements.

Audit trails must capture every delegation: who delegated what to whom, when, with what constraints, and what was returned. This enables post-hoc analysis and compliance review. Finally, task validation requires specialists to verify that tasks fall within their authorized scope and to reject tasks that would require accessing forbidden data or taking unauthorized actions.

% ----------------------------------------------------------------------------
% Protocol Selection
% ----------------------------------------------------------------------------

\subsection{Protocol Selection Guidance}
\label{sec:agents2-protocol-selection}

\begin{table}[htbp]
\centering
\caption{Protocol selection cues}
\label{tab:agents2-protocol-selection}
\small
\begin{tabular}{p{0.28\textwidth}p{0.12\textwidth}p{0.16\textwidth}p{0.30\textwidth}}
\toprule
\textbf{Signal} & \textbf{Protocol} & \textbf{Latency} & \textbf{Examples} \\
\midrule
Immediate, well-defined operation & MCP & ms--seconds & Query database; retrieve document; run calculation \\
\midrule
Delegated work requiring judgment & A2A & minutes--hours & Assign research; request analysis; coordinate specialists \\
\midrule
End-to-end workflow with both & MCP + A2A & blended & Due diligence; portfolio rebalancing; regulatory assessment \\
\bottomrule
\end{tabular}
\end{table}

Use MCP when you need immediate tool access: database queries, document retrieval, and calculations. Use A2A when you need to delegate work that requires judgment, iteration, or extended execution time. Use both when complex workflows combine tool access (each specialist uses MCP) with coordination (the orchestrator uses A2A).

As of late 2025, MCP is production-ready for tool integration \parencite{mcp-spec}. A2A is maturing with a stable specification and active pilots \parencite{a2a-spec}, but cross-vendor reliability remains uneven. Design fallbacks to human coordination where A2A would ideally apply.

% ----------------------------------------------------------------------------
% Connection to Other Questions
% ----------------------------------------------------------------------------

\subsection{From Delegation to Governance}
\label{sec:agents2-delegation-governance}

Delegation distributes work across agents, creating governance challenges single-agent systems avoid. Accountability becomes complex: when a multi-agent workflow errs, responsibility could lie with the coordinator, the specialist, or the human who approved output. Information barriers applying to human teams must apply to their agents---an agent cannot access data its human principal could not. Audit trails must span the entire delegation tree; when regulators ask what happened, the trail must show every delegation, handoff, and decision point.

\Cref{sec:agents2-governance} previews governance requirements including accountability models and audit architecture.
