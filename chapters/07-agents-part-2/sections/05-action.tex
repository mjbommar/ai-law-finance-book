% ============================================================================
% 05-action.tex
% Q4: How Does an Agent Make Things Happen?
% Part of: Chapter 07 - Agents Part II: How to Build an Agent
% ============================================================================

\section{How Does an Agent Make Things Happen?}
\label{sec:agents2-action}

% ----------------------------------------------------------------------------
% Opening: Q4 Framing and Organizational Analogy
% ----------------------------------------------------------------------------

A junior associate's role extends beyond research to producing work product. They draft memos, send emails, file documents, and schedule meetings. A trader's role extends beyond analysis to execution. They enter orders, route trades, and confirm allocations. Value derives from action, not just observation.

Agentic systems face the same imperative. An agent that only reads---searching databases, retrieving documents, analyzing information---produces no deliverable. To complete tasks, agents must \textit{act}: generate documents, send communications, update systems, or execute transactions \parencite{schick2023toolformer}. Action implements the ``A'' in the GPA+IAT framework.

\begin{definitionbox}[title={Action Tools}]
\keyterm{Action tools} enable agents to change the state of external systems. Unlike perception tools (read-only), action tools \textit{write}: they file documents, send messages, execute trades, and update databases. Once executed, some actions cannot be undone.

The distinction between perception and action is fundamental to governance. Perception risks involve internal errors (accessing wrong information). Action risks involve external consequences (harming clients, violating regulations, creating liability).
\end{definitionbox}

% ----------------------------------------------------------------------------
% Action Tool Categories
% ----------------------------------------------------------------------------

\subsection{Action Tool Categories}
\label{sec:agents2-action-categories}

Action tools vary in consequence. The critical dimension is \keyterm{reversibility}: the cost and feasibility of undoing an action. Research on rollback-augmented systems demonstrates that selective state rollback reduces catastrophic failures in safety-sensitive environments \parencite{rollback-rl-2024}. In Figure \ref{fig:agents2-reversibility-spectrum}, we categorize action tools along a spectrum from easily undone to permanent.

\textbf{Communication tools} send information to others. Internal communications (emails to colleagues, Slack messages) are \textit{partially reversible}. You can follow up with corrections, though you cannot unsend. External communications (emails to clients, letters to counsel) carry higher stakes because recipients are outside your control. Retractions are possible but damage professional reputation. Automated alerts (compliance notifications, reminders) are generally low-risk if templated. Governance typically relies on post-hoc review for internal actions and pre-approval for external ones.

\textbf{Document management tools} create and organize work product. These are \textit{largely reversible}. Drafting memos, generating reports, and filing documents in internal systems occur within the firm's control. Revisions are possible until distribution. Template application (populating standard forms) is low-risk if the templates are pre-validated. The primary control is review before external release.

\textbf{Filing and submission tools} send documents to external authorities. These are \textit{largely irreversible}. Court filings via CM/ECF (Case Management/Electronic Case Files) become public record upon submission. Amendments are possible but the original remains visible. Regulatory submissions via EDGAR (Electronic Data Gathering, Analysis, and Retrieval) or FINRA systems trigger legal obligations. Errors may compel public corrections or enforcement actions. Contract execution creates binding legal obligations that are difficult to unwind. These actions require mandatory pre-approval.

\textbf{Transaction execution tools} transfer value or change ownership. These are \textit{effectively irreversible} or costly to reverse. Trade execution involves entering orders and confirming allocations. Reversal requires offsetting trades at market prices, realizing any loss. Payment processing (wire transfers) moves funds immediately; recovery relies on recipient cooperation. System updates (modifying production databases) can disrupt operations. These actions demand the strictest controls: multi-factor approval, segregation of duties, and real-time monitoring.

% ----------------------------------------------------------------------------
% The Reversibility Framework
% ----------------------------------------------------------------------------

\subsection{The Reversibility Framework}
\label{sec:agents2-reversibility}

\input{figures/fig-reversibility-spectrum}

Reversibility dictates oversight structure. Consider how you delegate to a junior associate.

For \textbf{fully reversible} actions (research, drafting), the associate works independently. You review the output before it matters. Errors are internal and cost-free to fix.

For \textbf{partially reversible} actions (internal emails, file organization), you employ checkpoint review. The associate completes the work, and you review it periodically or before a major milestone.

For \textbf{largely irreversible} actions (client emails, filings), you require pre-approval. The associate prepares the draft, but you must approve it before execution.

For \textbf{irreversible} actions (trades, wires), you implement multi-party approval. No single individual---human or machine---can execute alone.

\begin{table}[htbp]
\centering
\caption{Action reversibility and required oversight}
\label{tab:agents2-reversibility}
\small
\begin{tabular}{
  >{\raggedright\arraybackslash}p{0.20\textwidth}
  >{\raggedright\arraybackslash}p{0.25\textwidth}
  >{\raggedright\arraybackslash}p{0.22\textwidth}
  >{\raggedright\arraybackslash}p{0.20\textwidth}
}
\toprule
\textbf{Reversibility} & \textbf{Examples} & \textbf{Oversight} & \textbf{Recovery} \\
\midrule
Fully reversible & Research; internal drafts; calculations & Post-hoc review & Delete/revise \\
\midrule
Partially reversible & Internal emails; document filing; alerts & Checkpoint review & Correction/\allowbreak follow-up \\
\midrule
Largely irreversible & Client communications; court filings; regulatory submissions & Pre-approval required & Amendment/\\retraction (visible) \\
\midrule
Irreversible & Trade execution; wire transfers; contract execution & Multi-party approval & Offsetting transaction (costly) \\
\bottomrule
\end{tabular}
\end{table}

Agent governance must track this framework. The architecture should enforce controls corresponding to the action's reversibility classification.

% ----------------------------------------------------------------------------
% MCP Tools for Action
% ----------------------------------------------------------------------------

\subsection{MCP Tools and Prompts for Action}
\label{sec:agents2-mcp-action}

The Model Context Protocol (MCP) defines two capability types relevant to action governance.

\keyterm{MCP Tools} are executable functions that change state. Unlike read-only Resources, Tools create documents, send communications, submit filings, and execute transactions. Tool manifests should include risk metadata: reversibility classification, approval requirements, and audit logging needs. This allows the MCP Host to enforce controls automatically.

\keyterm{MCP Prompts} are reusable templates for common tasks. For action workflows, prompts encode Standard Operating Procedures (SOPs).
\begin{itemize}[nosep]
    \item \textbf{Legal:} Contract review checklists, filing preparation workflows.
    \item \textbf{Finance:} Trade compliance checks, client onboarding sequences.
\end{itemize}
Prompts standardize action sequences, reducing variation and error. They act as "guardrails" by ensuring the agent follows the approved procedure for high-stakes actions.

% ----------------------------------------------------------------------------
% Action Security
% ----------------------------------------------------------------------------

\subsection{Action Security}
\label{sec:agents2-action-security}

Every action interface is a security boundary. Actions access external systems and create real-world consequences.

All action tools must implement core security controls:
\begin{itemize}[nosep]
    \item \textbf{Authentication:} Verify the agent's identity via service accounts with strong credentials.
    \item \textbf{Authorization:} Enforce role-based access control (RBAC) and least privilege.
    \item \textbf{Input Validation:} Reject malformed requests by validating all parameters against strict schemas.
    \item \textbf{Output Confirmation:} Require human approval before executing high-stakes actions.
    \item \textbf{Rate Limiting:} Cap action frequency to prevent runaway execution.
    \item \textbf{Audit Logging:} Record every action with context (agent, timestamp, parameters, matter/client).
\end{itemize}

Beyond core controls, specific threats require targeted mitigations \parencite{owasp-llm-top10,agent-security-bench-2024}:

\textbf{Prompt Injection via Action Parameters.} Adversaries may embed malicious instructions in data that the agent processes and passes to tools. Mitigation requires sanitizing all parameters and never passing raw user input directly to sensitive action interfaces.

\textbf{Privilege Escalation via Tool Chaining.} An agent might combine multiple low-privilege tools to achieve a high-privilege outcome. Mitigation involves analyzing tool combinations and requiring approval for sequences that cross security boundaries.

\textbf{Action Replay.} An attacker might capture a valid action request (e.g., "Pay \$100") and replay it multiple times. Mitigation requires \keyterm{nonces} (unique, one-time numbers) or timestamps to ensure each request is processed only once.

% ----------------------------------------------------------------------------
% Approval Workflows
% ----------------------------------------------------------------------------

\subsection{Approval Workflows}
\label{sec:agents2-approval}

For non-reversible actions, the agent prepares and the human approves \parencite{human-ai-collaboration-2024}. We define three patterns for this division of responsibility.

The \textbf{Single Approver} pattern suits routine actions with clear authority. The agent completes preparation and presents it to one designated human. \textit{Example:} The agent prepares a draft court filing; the supervising attorney reviews and approves; the agent submits.

The \textbf{Multi-Party Approval} pattern applies to high-stakes actions with significant exposure. Multiple independent humans must sign off. \textit{Example:} The agent prepares a wire transfer. Operations reviews the amount. Compliance reviews the purpose. A manager provides final approval. Only then does the agent execute.

The \textbf{Escalating Approval} pattern adjusts authority based on risk tiers. \textit{Example:} Trades under \$100k require desk manager approval. Trades between \$100k and \$1M require senior trader approval. Trades over \$1M require CIO approval.

Effective approval requests must enable informed decision-making. The agent should present:
\begin{itemize}[nosep]
\item \textbf{Action:} Clear description of what will happen.
\item \textbf{Context:} Why is this needed?
\item \textbf{Risk:} What are the potential negative outcomes?
\item \textbf{Reversibility:} Can this be undone?
\item \textbf{Evidence:} What data supports this decision?
\end{itemize}
The approver should be able to decide based on the request alone, without needing to investigate the raw data.

% ----------------------------------------------------------------------------
% Rate Limiting and Circuit Breakers
% ----------------------------------------------------------------------------

\subsection{Rate Limiting and Circuit Breakers}
\label{sec:agents2-circuit-breakers}

Agents can fail in loops: repeatedly submitting the same request, sending duplicate messages, or retrying failed transactions.

\textbf{Rate Limiting} caps action frequency. The thresholds below are \textit{illustrative}; calibrate them to your workflow, risk tolerance, and regulatory obligations.
\begin{itemize}[nosep]
    \item \textit{Per-Action:} e.g., max 5 emails per minute.
    \item \textit{Per-Matter:} e.g., max 20 actions per day without review.
    \item \textit{Cost:} e.g., max \$1,000 in transaction fees per session.
\end{itemize}
When limits are reached, the agent must pause and escalate.

\textbf{Circuit Breakers} automatically stop execution upon anomaly detection. These examples are also \textit{illustrative} and should be tuned to baseline behavior and threat models.
\begin{itemize}[nosep]
    \item \textit{Failure Count:} e.g., if an action fails three times, stop.
    \item \textit{Spike Detection:} e.g., if action rate spikes 5$\times$ above baseline, pause (potential compromise).
    \item \textit{Cumulative Limit:} If daily total exceeds safety thresholds, lock the system.
\end{itemize}
Circuit breakers transform runaway failures into controlled pauses, buying time for human intervention.

% ----------------------------------------------------------------------------
% Evaluating Action Capabilities
% ----------------------------------------------------------------------------

\subsection{Evaluating Action Capabilities}
\label{sec:agents2-action-eval}

When evaluating agentic systems, assess action capabilities against professional standards.

\textbf{Inventory:} Map all available action tools against workflow requirements. Verify that no "unnecessary" tools are enabled (Least Privilege).

\textbf{Classification:} Verify that each tool is correctly classified by reversibility. Ensure that "delete database" is not classified as "fully reversible."

\textbf{Controls:} Confirm that approval gates exist for all irreversible actions. Verify that approvers receive sufficient context. Check authentication and audit logging.

\textbf{Safety:} Test rate limits and circuit breakers. Simulate a "runaway agent" scenario to ensure the system locks down. Verify rollback procedures: if an action fails, can you recover?

% ----------------------------------------------------------------------------
% Connection to Other Questions
% ----------------------------------------------------------------------------

\subsection{From Action to Governance}
\label{sec:agents2-action-governance}

Action tools are where agentic systems create real-world consequences. Governance here differs in kind from perception governance.

Perception risks (accessing wrong data) are internal. Action risks (sending wrong emails, executing wrong trades) are external and potentially irreversible. This section established the architectural controls: the Reversibility Framework, approval workflows, and circuit breakers.

\Cref{sec:agents2-escalation} examines when agents should \textit{not} act---recognizing situations that require human decision-making. The interplay between action capability and escalation judgment is central to safety. \Cref{sec:agents2-memory} addresses memory: how agents maintain context across sessions and learn from experience.
