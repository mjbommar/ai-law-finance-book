% HOTL Monitoring Dashboard - Agentic Credit Underwriting

\begin{figure}[htbp]
\centering
\begin{tikzpicture}[
    metric box/.style={
        rounded corners=4pt,
        draw=gray-500,
        line width=0.75pt,
        fill=white,
        minimum width=2.2cm,
        minimum height=1.5cm,
        font=\small,
        align=center
    },
    metric value/.style={font=\large\bfseries},
    metric label/.style={font=\scriptsize, text=gray-600},
    alert box/.style={
        rounded corners=3pt,
        draw=#1,
        line width=1pt,
        fill=#1!8,
        text width=9.5cm,
        inner sep=6pt,
        font=\footnotesize
    },
    section header/.style={
        font=\small\bfseries\sffamily,
        text=slate-700,
        anchor=west
    },
    status indicator/.style={
        circle,
        minimum size=0.3cm,
        inner sep=0pt
    },
    dashboard frame/.style={
        rounded corners=8pt,
        draw=gray-300,
        line width=1pt,
        fill=bg-neutral,
        inner sep=10pt
    },
    pill filter/.style={
        rounded corners=3pt,
        draw=gray-300,
        fill=gray-100,
        inner sep=2pt,
        font=\tiny\sffamily,
        text=gray-700
    },
    pill filter active/.style={
        pill filter,
        draw=primary,
        text=primary,
        fill=definition-light
    },
    meta label/.style={
        font=\tiny\sffamily,
        text=gray-600
    }
]

% Main dashboard frame
\node[dashboard frame, minimum width=11.5cm, minimum height=12.8cm] (frame) at (0,-4.6) {};

% Application chrome (top navigation bar)
\node[
    rounded corners=6pt,
    draw=gray-300,
    line width=0.6pt,
    fill=gray-100,
    minimum width=10.8cm,
    minimum height=0.6cm
] (topbar) at (0,1.5) {};
\node[meta label, anchor=east] at ([xshift=-0.3cm]topbar.east) {Last refreshed: 2026-07-15 09:42 ET};

% Dashboard view title and filters
\node[font=\small\bfseries\sffamily, text=slate-900, anchor=west] (viewtitle) at (-5.0,0.7) {HOTL Monitoring --- Agentic Credit Underwriting};
\node[meta label, anchor=west] at ([yshift=-0.3cm]viewtitle.south west) {Portfolio: Retail mortgage \textbullet\ Region: US \textbullet\ Channel: Online};
\node[pill filter active, anchor=west] at ([xshift=4.5cm,yshift=-0.3cm]viewtitle.south west) {Today};
\node[pill filter, anchor=west] at ([xshift=5.8cm,yshift=-0.3cm]viewtitle.south west) {7d};
\node[pill filter, anchor=west] at ([xshift=6.8cm,yshift=-0.3cm]viewtitle.south west) {30d};

% === METRICS ROW ===
\node[section header] at (-5.0,-0.4) {Daily Metrics};

% Metric 1: Avg Cycles
\node[metric box] (m1) at (-3.8,-1.5) {};
\node[metric value, text=slate-900] at ([yshift=0.15cm]m1.center) {3.2};
\node[metric label] at ([yshift=-0.4cm]m1.center) {Avg Cycles/App};

% Metric 2: Confidence Exits
\node[metric box] (m2) at (-1.3,-1.5) {};
\node[metric value, text=example-dark] at ([yshift=0.15cm]m2.center) {847};
\node[metric label] at ([yshift=-0.4cm]m2.center) {Confidence Exits};

% Metric 3: Timeout Exits
\node[metric box] (m3) at (1.2,-1.5) {};
\node[metric value, text=key-base] at ([yshift=0.15cm]m3.center) {23};
\node[metric label] at ([yshift=-0.4cm]m3.center) {Timeout Exits};

% Metric 4: Consistency Score
\node[metric box] (m4) at (3.7,-1.5) {};
\node[metric value, text=slate-900] at ([yshift=0.15cm]m4.center) {94\%};
\node[metric label] at ([yshift=-0.4cm]m4.center) {Consistency Score};

% === ESCALATION TRIGGERS ===
\node[section header] at (-5.0,-2.8) {Active Escalation Triggers};

% Alert 1 - Green (normal)
\node[alert box=example-dark] (a1) at (0.3,-3.7) {
    \textbf{Low Confidence After Max Cycles}~~\textnormal{(Conf.\ <0.70 after 7 cycles)}\\[1pt]
    \textcolor{gray-600}{3 applications escalated to senior underwriter for manual completion}
};
\node[status indicator, fill=example-base] at ([xshift=-0.3cm]a1.west) {};

% Alert 2 - Green (normal)
\node[alert box=example-dark, below=0.3cm of a1] (a2) {
    \textbf{Timeout Termination Review}~~\textnormal{(System timeout vs.\ confidence exit)}\\[1pt]
    \textcolor{gray-600}{2 applications flagged for investigation adequacy review}
};
\node[status indicator, fill=example-base] at ([xshift=-0.3cm]a2.west) {};

% Alert 3 - Amber (elevated)
\node[alert box=key-base, below=0.3cm of a2] (a3) {
    \textbf{Applicant Dispute}~~\textnormal{(Preliminary assessment challenged)}\\[1pt]
    \textcolor{gray-600}{1 dispute --- underwriter reviewing cycle-by-cycle investigation log}
};
\node[status indicator, fill=key-base] at ([xshift=-0.3cm]a3.west) {};

% Alert 4 - Green (normal)
\node[alert box=example-dark, below=0.3cm of a3] (a4) {
    \textbf{Cross-Cycle Inconsistency}~~\textnormal{(Contradictory assessments detected)}\\[1pt]
    \textcolor{gray-600}{0 applications flagged --- consistency score within normal range}
};
\node[status indicator, fill=example-base] at ([xshift=-0.3cm]a4.west) {};

% Alert 5 - Scheduled (gray)
\node[alert box=gray-500, below=0.3cm of a4] (a5) {
    \textbf{Fairness Metric Violation}~~\textnormal{(Disparate impact >20\%)}\\[1pt]
    \textcolor{gray-600}{Monthly review scheduled --- current DI ratio: 8.3\% (within threshold)}
};
\node[status indicator, fill=gray-500] at ([xshift=-0.3cm]a5.west) {};

% Legend
\node[font=\scriptsize, text=gray-600, anchor=north west] at (-5.0,-10.3) {
    \tikz\node[status indicator, fill=example-base] {}; Normal~~
    \tikz\node[status indicator, fill=key-base] {}; Elevated~~
    \tikz\node[status indicator, fill=caution-base] {}; Critical~~
    \tikz\node[status indicator, fill=gray-500] {}; Scheduled
};

\end{tikzpicture}
\caption{HOTL monitoring dashboard for agentic credit underwriting. The dashboard displays daily operational metrics (average investigation cycles, termination reasons, cross-cycle consistency) and active escalation triggers with status indicators. Senior underwriters monitor aggregate performance and intervene when triggers fire.}
\label{fig:agents3-hotl-dashboard}
\end{figure}
