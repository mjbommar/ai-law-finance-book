% ============================================================================
% MAIN DOCUMENT - Artificial Intelligence for Law and Finance
% ============================================================================
% This is the root document for the complete book.
% Individual chapters can be compiled standalone using subfiles.
%
% Build this file to generate the complete book PDF.
% Build chapter files directly to generate standalone chapter PDFs.
% ============================================================================

\documentclass[11pt,oneside]{book}

% ============================================================================
% PATH HANDLING FOR SUBFILES
% ============================================================================
\usepackage{import}  % Must be loaded before subfiles
\usepackage{subfiles}

% ============================================================================
% SHARED PREAMBLE
% ============================================================================
% All typography, colors, packages, and custom commands
% Use relative path that works when loaded as subfile
\makeatletter
\def\input@path{{./}{../}{../../}}
\makeatother
\input{preamble.tex}

% ============================================================================
% BIBLIOGRAPHY SETUP
% ============================================================================
% Use consolidated bibliography at root level
\addbibresource{bib/refs.bib}

% ============================================================================
% DOCUMENT METADATA
% ============================================================================
\hypersetup{
  pdftitle={Artificial Intelligence for Law and Finance},
  pdfauthor={},
  pdfsubject={Artificial Intelligence, Law, Finance, Technology},
  pdfkeywords={AI, machine learning, legal technology, fintech, regulation, agentic systems}
}

% ============================================================================
% TITLE AND FRONT MATTER
% ============================================================================
\title{
  \vspace{-1em}
  {\Huge\bfseries\color{primary} Artificial Intelligence}\\[0.5em]
  {\Huge\bfseries\color{primary} for Law and Finance}\\[0.8em]
  {\large\itshape\color{text-secondary} A Comprehensive Textbook for Practitioners and Researchers}
  \vspace{0.5em}
}

\author{
  \vspace{-0.5em}
  {\large\color{text-muted} Draft Version}\\[0.3em]
  {\normalsize\color{text-muted} \today}
}

\date{}

% ============================================================================
% DOCUMENT CONTENT
% ============================================================================
\begin{document}

% Front matter
\frontmatter

\maketitle

% Decorative rule after title block
\vspace{-1em}
\noindent{\color{border-neutral}\rule{\textwidth}{0.5pt}}
\vspace{1.0em}

% Draft notice - professional blue-gray theme
\begin{center}
\begin{tcolorbox}[
    enhanced,
    width=0.85\textwidth,
    colback=bg-note,
    colframe=border-note,
    fonttitle=\bfseries\large\color{note-dark},
    boxrule=1.5pt,
    arc=4pt,
    left=16pt,
    right=16pt,
    top=12pt,
    bottom=12pt,
    breakable,
    drop shadow={shadow xshift=1pt, shadow yshift=-1pt, opacity=0.08},
    borderline west={4pt}{0pt}{note-dark}
  ]

  % Header - centered
  \begin{center}
    {\large\bfseries\color{note-dark} Working Draft Textbook} \\[0.2em]
    {\small\color{text-muted} Version 0.1 --- In Active Development}
  \end{center}

  \vspace{0.25em}

  % Body text - justified
  {\small
    This textbook is currently under active development. Individual chapters are being drafted, reviewed, and refined independently before integration into the complete book. Content, structure, and formatting are subject to change as the project evolves.

    \vspace{0.5em}

    This is a collaborative scholarly work aimed at legal and financial practitioners, regulators, and researchers. We welcome feedback and contributions.

    \vspace{0.5em}

    You can find the most current version of this project here:\\
    \url{https://github.com/mjbommar/ai-law-finance-book/}
  }

\end{tcolorbox}
\end{center}

\vspace{1em}

\tableofcontents
\newpage

% ============================================================================
% VISUAL GUIDE TO BOX TYPES
% ============================================================================
\chapter*{How to Read This Book}
\addcontentsline{toc}{chapter}{How to Read This Book}

\begin{highlightbox}[title={\textbf{Visual Cues: Box Types and Importance}}]
This textbook uses colored boxes to signal different types of content. Each box type has a distinct visual appearance to help you navigate:

\textbf{Box types by color:}
\begin{itemize}[nosep]
  \item \textbf{Definition boxes} (dark blue borders, ice blue backgrounds) — formal definitions and theoretical frameworks
  \item \textbf{Key takeaway boxes} (amber/orange borders, light yellow backgrounds) — essential concepts you should remember
  \item \textbf{Question boxes} (gray borders with dark blue accent) — evaluation rubrics and decision frameworks
  \item \textbf{Theorem boxes} (indigo borders, light purple backgrounds) — formal mathematical statements
  \item \textbf{Note boxes} (neutral gray borders, cream backgrounds) — supplementary context and asides
\end{itemize}

\textbf{Importance levels within boxes:}

To reduce visual overload, some boxes use an \textbf{importance} scale that adjusts border weight and opacity:
\begin{itemize}[nosep]
  \item \textbf{High} (bold borders, drop shadows) — emphatic takeaways and formal results
  \item \textbf{Medium} (standard appearance) — core definitions and primary guidance
  \item \textbf{Low} (lighter borders, subtle backgrounds) — supporting examples, historical milestones, or repeated concepts
\end{itemize}

You can skim efficiently by reading \textbf{high} and \textbf{medium} boxes first, then returning to \textbf{low} boxes when you want deeper context.
\end{highlightbox}

\vspace{1em}

Individual chapters may also include chapter-specific reading guidance to help you navigate according to your goals (quick reference, historical context, or comprehensive understanding).

\newpage

% Main content
\mainmatter

% ============================================================================
% FOUNDATIONS: LLMS AND PROMPTING
% ============================================================================
\part{Foundations: LLMs and Prompting}

% Foundations Chapter A — LLM Primer and Mechanics
\subfile{chapters/01-foundations-llm-primer-mechanics/main}

% Foundations Chapter B — Conversations and Reasoning
\subfile{chapters/02-foundations-conversations-reasoning/main}

% Foundations Chapter C — Structured Outputs and Tool Use
\subfile{chapters/03-foundations-structured-outputs-tools/main}

% Foundations Chapter D — Multimodal Fundamentals
\subfile{chapters/04-foundations-multimodal/main}

% Foundations Chapter E — Prompt Design, Evaluation, and Optimization
\subfile{chapters/05-foundations-prompt-design-eval-optimization/main}

% ============================================================================
% PART I: AGENTS AND AGENTIC SYSTEMS
% ============================================================================
\part{Agents and Agentic Systems}

% Chapter 1: What is an Agent?
\subfile{chapters/06-agents-part-1/main}

% Chapter 2: How to Build an Agent (Part II)
\subfile{chapters/07-agents-part-2/main}

% Chapter 3: How to Govern an Agent (Part III)
\subfile{chapters/08-agents-part-3/main}

% ============================================================================
% KNOWLEDGE GRAPHS & SEMANTIC WEB
% ============================================================================
\part{Knowledge Graphs \& Semantic Web}

% KG Chapter 1: Foundations
\subfile{chapters/09-kg-foundations/main}

% KG Chapter 2: Operations with LLMs
\subfile{chapters/10-kg-operations-llm/main}

% ============================================================================
% FUTURE CHAPTERS (Add as they are developed)
% ============================================================================
% \subfile{chapters/prompting-and-meta-prompting/main}
% \subfile{chapters/llm-foundations/main}
% \subfile{chapters/legal-applications/main}
% \subfile{chapters/financial-applications/main}

% ============================================================================
% BACK MATTER
% ============================================================================
\backmatter

% Unified bibliography for entire book
\printbibliography

\end{document}
